import React from 'react'
import { Button } from '@material-ui/core'
import Widget from '../components/widget'
import SEO from '../components/shared/seo'
import * as mockApi from '../clients/mockApi'
import useCurrentUser from '../effects/useCurrentUser'

function GoalCo() {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="85"
      height="103"
      fill="none"
      viewBox="0 0 85 103"
    >
      <path
        fill="#000"
        d="M16.53 94.715c-.686.762-1.69 1.375-3.01 1.84-1.32.466-2.767.699-4.341.699-2.42 0-4.355-.74-5.802-2.222-1.447-1.48-2.222-3.542-2.323-6.182l-.013-1.6c0-1.82.322-3.407.965-4.76.643-1.363 1.561-2.409 2.755-3.136 1.202-.737 2.59-1.105 4.164-1.105 2.302 0 4.088.529 5.357 1.587 1.278 1.05 2.023 2.62 2.235 4.71h-4.291c-.153-1.033-.483-1.769-.99-2.21-.509-.44-1.228-.66-2.159-.66-1.117 0-1.98.475-2.59 1.423-.61.947-.918 2.302-.926 4.062v1.117c0 1.845.313 3.233.939 4.164.635.923 1.63 1.384 2.983 1.384 1.16 0 2.023-.258 2.59-.774v-2.87H8.976v-3.059h7.553v7.592zm1.853-4.71c0-1.371.266-2.59.8-3.656.533-1.075 1.299-1.9 2.297-2.476 1-.576 2.171-.863 3.517-.863 2.057 0 3.677.639 4.862 1.917 1.185 1.27 1.778 3 1.778 5.192v.153c0 2.14-.597 3.842-1.79 5.103-1.185 1.253-2.793 1.879-4.825 1.879-1.955 0-3.525-.584-4.71-1.752-1.184-1.176-1.823-2.768-1.917-4.773l-.012-.724zm4.278.267c0 1.269.199 2.2.597 2.792.398.593.986.89 1.765.89 1.523 0 2.302-1.173 2.335-3.517v-.432c0-2.463-.787-3.694-2.36-3.694-1.431 0-2.206 1.062-2.324 3.186l-.013.775zM41.26 97c-.153-.28-.288-.69-.407-1.231-.787.99-1.887 1.485-3.3 1.485-1.295 0-2.395-.39-3.301-1.168-.906-.787-1.358-1.773-1.358-2.958 0-1.49.55-2.615 1.65-3.377 1.1-.762 2.7-1.143 4.799-1.143h1.32v-.723c0-1.261-.546-1.892-1.638-1.892-1.015 0-1.523.5-1.523 1.498h-4.278c0-1.329.563-2.408 1.688-3.237 1.134-.83 2.577-1.244 4.33-1.244 1.751 0 3.135.427 4.15 1.282 1.016.855 1.537 2.027 1.562 3.517v6.08c.017 1.262.212 2.227.584 2.895V97H41.26zm-2.679-2.793c.533 0 .973-.114 1.32-.343.356-.228.61-.486.762-.774v-2.196H39.42c-1.49 0-2.234.668-2.234 2.005 0 .39.13.707.393.953.262.236.597.355 1.003.355zM51.848 97h-4.291V77.5h4.29V97zm17.799-6.259c-.06 1.287-.407 2.425-1.041 3.415-.635.982-1.528 1.744-2.68 2.285-1.142.542-2.45.813-3.922.813-2.43 0-4.342-.791-5.738-2.374-1.397-1.583-2.095-3.817-2.095-6.703v-.914c0-1.812.313-3.394.94-4.748.634-1.363 1.544-2.412 2.729-3.149 1.185-.745 2.556-1.117 4.113-1.117 2.243 0 4.046.593 5.408 1.777 1.363 1.177 2.137 2.802 2.324 4.875H65.24c-.034-1.125-.317-1.934-.85-2.424-.534-.491-1.346-.737-2.438-.737-1.109 0-1.921.415-2.437 1.244-.517.83-.788 2.154-.813 3.974v1.308c0 1.972.246 3.38.736 4.227.5.847 1.355 1.27 2.565 1.27 1.024 0 1.807-.242 2.349-.724.541-.482.829-1.248.863-2.298h4.43zm1.37-.736c0-1.371.267-2.59.8-3.656.534-1.075 1.3-1.9 2.298-2.476.999-.576 2.171-.863 3.517-.863 2.056 0 3.677.639 4.862 1.917 1.185 1.27 1.778 3 1.778 5.192v.153c0 2.14-.597 3.842-1.79 5.103-1.186 1.253-2.793 1.879-4.825 1.879-1.955 0-3.525-.584-4.71-1.752-1.185-1.176-1.824-2.768-1.917-4.773l-.012-.724zm4.279.267c0 1.269.199 2.2.597 2.792.397.593.986.89 1.764.89 1.524 0 2.302-1.173 2.336-3.517v-.432c0-2.463-.787-3.694-2.361-3.694-1.43 0-2.205 1.062-2.323 3.186l-.013.775z"
      ></path>
      <path
        stroke="#000"
        strokeWidth="8"
        d="M41.414 9.5a1 1 0 011.732 0l21.357 36.991a1 1 0 01-.047 1.074l-5.96 8.509a1 1 0 01-.819.426H26.882a1 1 0 01-.819-.426l-5.96-8.51a1 1 0 01-.046-1.073L41.414 9.5z"
      ></path>
      <path
        stroke="#000"
        strokeWidth="8"
        d="M41.166 37.517a1 1 0 011.668 0l9.82 14.859a1 1 0 01-.055 1.176l-1.661 2.074a1 1 0 01-.78.374H33.842a1 1 0 01-.78-.374L31.4 53.552a1 1 0 01-.055-1.176l9.82-14.859z"
      ></path>
    </svg>
  )
}

function CartIcon() {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M5.88559 20.4698C6.2839 20.0647 6.76271 19.8621 7.32203 19.8621C7.88136 19.8621 8.36017 20.0647 8.75847 20.4698C9.15678 20.875 9.35593 21.3621 9.35593 21.931C9.35593 22.5 9.15678 22.9871 8.75847 23.3922C8.36017 23.7974 7.88136 24 7.32203 24C6.76271 24 6.2839 23.7974 5.88559 23.3922C5.48729 22.9871 5.28814 22.5 5.28814 21.931C5.28814 21.3621 5.48729 20.875 5.88559 20.4698ZM18.9025 20.4698C19.3008 20.0647 19.7797 19.8621 20.339 19.8621C20.8983 19.8621 21.3771 20.0647 21.7754 20.4698C22.1737 20.875 22.3729 21.3621 22.3729 21.931C22.3729 22.5 22.1737 22.9871 21.7754 23.3922C21.3771 23.7974 20.8983 24 20.339 24C19.7797 24 19.3008 23.7974 18.9025 23.3922C18.5042 22.9871 18.3051 22.5 18.3051 21.931C18.3051 21.3621 18.5042 20.875 18.9025 20.4698ZM7.15678 2.48276H24L23.911 3.59483C23.8941 3.9569 23.8093 5.07759 23.6568 6.9569C23.5042 8.82759 23.3898 10.0086 23.3136 10.5C23.1949 11.3362 22.8136 12.0431 22.1695 12.6207C21.5254 13.1897 20.7246 13.5431 19.7669 13.681C19.75 13.681 16.4153 14.0862 9.76271 14.8966V12.8147C10.4576 12.7284 11.5678 12.5948 13.0932 12.4138C14.6186 12.2328 15.9831 12.069 17.1864 11.9224C18.3983 11.7759 19.1695 11.6767 19.5 11.625C20 11.5647 20.411 11.4052 20.7331 11.1466C21.0551 10.8879 21.2458 10.569 21.3051 10.1897C21.3983 9.57759 21.5636 7.69828 21.8008 4.55172H7.32203V15.2974C7.32203 15.6767 7.44068 15.9828 7.67797 16.2155C7.92373 16.4397 8.25424 16.5517 8.66949 16.5517H22.3729V18.6207H8.66949C7.70339 18.6207 6.8983 18.306 6.25424 17.6767C5.61017 17.0388 5.28814 16.2457 5.28814 15.2974V3.49138C5.28814 3.11207 5.13559 2.78017 4.83051 2.49569C4.5339 2.21121 4.18644 2.06897 3.78814 2.06897H0V0H3.78814C4.55932 0 5.25424 0.232759 5.87288 0.698276C6.5 1.16379 6.92797 1.75862 7.15678 2.48276Z"
        fill="black"
      />
    </svg>
  )
}

function Rating({ stars, reviews }: { stars: number; reviews: number }) {
  return (
    <div className="reviews">
      {[...Array(stars)].map((n) => (
        <span>
          <Star />
        </span>
      ))}
      <span>{reviews} Reviews</span>
    </div>
  )
}

function Star() {
  return (
    <svg
      width="18"
      height="17"
      viewBox="0 0 18 17"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M9 0L11.0206 6.21885H17.5595L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885H6.97937L9 0Z"
        fill="#FADE60"
      />
    </svg>
  )
}

function PriceAndBuy({ price }: { price: number }) {
  return (
    <>
      <div className="price">
        <h2>${price}</h2>
        <Button className="add-to-cart">Add to Cart</Button>
      </div>
      <div className="guarantee">Try risk-free, 100% happiness guaranteed</div>
    </>
  )
}

export default function DemoPage(props: any): JSX.Element {
  const currentUser = useCurrentUser()

  const postIssue = async (widgetFormValues: {
    title: string
    initialCommentHtml: string
  }) => {
    if (!currentUser.loaded) {
      throw new Error(`Cannot post an issue for a nonexistent user`)
    }

    const issue = await mockApi.postIssue({
      site: "goalco.com",
      title: widgetFormValues.title,
      user: currentUser.user,
      initialCommentHtml: widgetFormValues.initialCommentHtml,
    })

    props.navigate(`/issue?site=${issue.site}&id=${issue.id}`)
  }

  return (
    <div className="demo-page">
      <SEO
        pageTitle="Demo"
        links={[
          {
            rel: "shortcut icon",
            type: "image/png",
            sizes: "32x32",
            href: "/goalco.ico",
          },
          { rel: "stylesheet", type: "text/css", href: "/trix.css" },
        ]}
        scripts={[{ type: "text/javascript", src: "/trix.js" }]}
      />
      <header>
        <GoalCo />
        <div className="links">
          <a>Products</a>
          <a>About Us</a>
          <a>Contact</a>
          <a>
            <CartIcon />
          </a>
        </div>
      </header>
      <div className="demo-content">
        <div className="text">
          <h1>The GoalCo 10X superpower suit</h1>
          <Rating stars={5} reviews={9494} />
          <p>
            Take your goal achieving capabilities to the next level with our
            state of the art superpower suit.
          </p>
          <p>
            Made from the finest bio materials known to man and ethically
            sourced from planet Goalgon.
          </p>
          <PriceAndBuy price={365} />
        </div>
        <img src="/goalco-hero.png" ></img>
      </div>
      <Widget postIssue={postIssue} />
    </div>
  )
}
